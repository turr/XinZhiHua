@{
    Layout = "~/Views/Shared/_Manager_Layout.cshtml";

    string action_name = ViewContext.RouteData.Values["action"].ToString().ToLower();

    List<New> data = new List<New>();
    if (!string.IsNullOrEmpty(ViewBag.Data))
    {
        data = Newtonsoft.Json.JsonConvert.DeserializeObject<List<New>>(ViewBag.Data);
    }
}
<div class="container">
    <h3 class="page-header">
        <a href="@Url.Content("~/Manager/NewEdit")" class="btn btn-success pull-right">　＋ 添加新闻　</a>
        新闻列表
    </h3>
    <table class="table table-striped table-bordered">
        <thead>
            <th align="center">封面</th>
            <th width="50%">标题</th>
            <th align="center">创建时间</th>
            <th>操作</th>
        </thead>
        @{
            foreach (New temp in data)
            {
                string img = string.IsNullOrEmpty(temp.Img) ? "" : Url.Content(temp.Img);
                string title = string.IsNullOrEmpty(temp.Title) ? "" : temp.Title;
                string  addTime = temp.AddTime == null ? "" : temp.AddTime.ToString("yyyy-MM-dd HH:mm:ss");

                <tr>
                    <td>
                        <img src="@img" style="max-width:200px">
                    </td>
                    <td>@title</td>
                    <td>@addTime</td>
                    <td>
                        <a href="@Url.Content("~/Manager/NewEdit?id="+temp.Id)"><i class="glyphicon glyphicon-edit"></i> </a>
                        <a href="@Url.Content("~/Manager/NewDelete?id="+temp.Id)" onClick="return confirm('确定删除?');"><i class="glyphicon glyphicon-trash"></i></a>
                    </td>
                </tr>
            }
        }
    </table>
    <div class="pager-nav">
        <span class="pull-right" style="padding-top:10px">
            @{@ViewBag.NowPage}/@{@ViewBag.AllPage}页,共@{@ViewBag.AllCount}条
        </span>
        <ul class="pagination">
            <li >
                <a href="@Url.Content("~/Manager/New?page=1")" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            @{
                for (int i = 1; i <= ViewBag.AllPage; i++)
                {
                    string active = i == ViewBag.NowPage ? "active" : "";
                    <li class="@active"><a href="@Url.Content("~/Manager/New?page="+ i)">@i</a></li>
                }
            }
            <li>
                <a href="@Url.Content("~/Manager/New?page="+ ViewBag.AllPage)" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </div>
</div>